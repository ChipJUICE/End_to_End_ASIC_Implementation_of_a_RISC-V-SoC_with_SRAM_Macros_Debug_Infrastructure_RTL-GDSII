800000b7  // lui   x1, 0x80000        ; MMIO base = 0x8000_0000

00100513  // addi  x10, x0, 1
00200593  // addi  x11, x0, 2
00b50633  // add   x12, x10, x11
00360693  // addi  x13, x12, 3

00000013  // nop
00000013  // nop

0000a103  // lw    x2,  0(x1)   ; mcycle
00000013  // nop
00000013  // nop

0080a183  // lw    x3,  8(x1)   ; minstret
00000013  // nop
00000013  // nop

0100a203  // lw    x4, 16(x1)   ; stall
00000013  // nop
00000013  // nop

0200a283  // lw    x5, 32(x1)   ; trace_triggered
00000013  // nop
00000013  // nop

0240a303  // lw    x6, 36(x1)   ; trace_wr_ptr
00000013  // nop
00000013  // nop

00500393  // addi  x7, x0, 5    ; trace index = 5
0270a823  // sw    x7, 48(x1)   ; trace_rd_addr
00000013  // nop
00000013  // nop

0280a403  // lw    x8, 40(x1)   ; trace_rd_pc
00000013  // nop
00000013  // nop

02c0a483  // lw    x9, 44(x1)   ; trace_rd_instr

0000006f  // jal   x0, 0        ; halt


//////////////////////////////////////////////////////////////////////////////////////////////////////////


800000b7  // 0x00: lui   x1, 0x80000        ; MMIO base

// -------------------------------------------------
// Phase 1: some ALU work
// -------------------------------------------------
00100513  // addi  x10, x0, 1
00200593  // addi  x11, x0, 2
00b50633  // add   x12, x10, x11
00360693  // addi  x13, x12, 3
00468713  // addi  x14, x13, 4
00570793  // addi  x15, x14, 5

00000013  // nop
00000013  // nop

// -------------------------------------------------
// Phase 2: read counters (snapshot #1)
// -------------------------------------------------
0000a103  // lw    x2,  0(x1)    ; mcycle
00000013
00000013

0080a183  // lw    x3,  8(x1)    ; minstret
00000013
00000013

0100a203  // lw    x4, 16(x1)    ; stall
00000013
00000013

// -------------------------------------------------
// Phase 3: more ALU work (grow trace + counters)
// -------------------------------------------------
00678813  // addi  x16, x15, 6
00780893  // addi  x17, x16, 7
01088933  // add   x18, x17, x16
011909b3  // add   x19, x18, x17

00000013
00000013

// -------------------------------------------------
// Phase 4: read counters again (snapshot #2)
// -------------------------------------------------
0000a283  // lw    x5,  0(x1)    ; mcycle
00000013
00000013

0080a303  // lw    x6,  8(x1)    ; minstret
00000013
00000013

// -------------------------------------------------
// Phase 5: trace walk (indices 0,1,2)
// -------------------------------------------------
00000393  // addi  x7, x0, 0     ; idx = 0
0270a823  // sw    x7, 48(x1)    ; trace_rd_addr
00000013
00000013
0280a403  // lw    x8, 40(x1)    ; trace_rd_pc
02c0a483  // lw    x9, 44(x1)    ; trace_rd_instr

00100393  // addi  x7, x0, 1     ; idx = 1
0270a823  // sw    x7, 48(x1)
00000013
00000013
0280a503  // lw    x10, 40(x1)
02c0a583  // lw    x11, 44(x1)

00200393  // addi  x7, x0, 2     ; idx = 2
0270a823  // sw    x7, 48(x1)
00000013
00000013
0280a603  // lw    x12, 40(x1)
02c0a683  // lw    x13, 44(x1)

// -------------------------------------------------
// Halt
// -------------------------------------------------
0000006f  // jal   x0, 0

// 0x8000_0000 – mcycle 
// 0x8000_0008 – minstret 
// 0x8000_0010 – stall 
// 0x8000_0020 – trace_triggered 
// 0x8000_0024 – trace_wr_ptr 
// 0x8000_0028 – trace_rd_pc 
// 0x8000_002C – trace_rd_instr



//////////////////////////////////////////////////////////////////////////////////////////////////////////

800000b7  // lui x1, 0x80000

// -------------------------------------------------
// Massive ALU block (fills trace + counters)
// -------------------------------------------------
00100513
00200593
00300613
00400693
00500713
00600793
00b50633
00c586b3
00d60733
00e687b3
00f70833
010788b3
01180933
012889b3
01390a33
01498ab3
015a0b33
016a8bb3
017b0c33
018b8cb3
019c0d33
01ac8db3
01bd0e33
01cd8eb3
01de0f33
01ee8fb3
020f1033
021f90b3
02201133
023091b3
02411233
025192b3
02621333
027293b3
02831433
029394b3
02a41533
02b495b3
02c51633
02d596b3
02e61733
02f697b3
03071833
031798b3
03281933
033899b3
03491a33
03599ab3
036a1b33
037a9bb3
038b1c33
039b9cb3
03ac1d33
03bc9db3
03cd1e33
03dd9eb3

// -------------------------------------------------
// MMIO counter snapshot
// -------------------------------------------------
0000a103  // lw mcycle
00000013
00000013
0080a183  // lw minstret
00000013
00000013

// -------------------------------------------------
// Trace walk (indices 0, 4, 8, 12)
// -------------------------------------------------
00000393
0270a823
0280a403
02c0a483

00400393
0270a823
0280a503
02c0a583

00800393
0270a823
0280a603
02c0a683

00c00393
0270a823
0280a703
02c0a783

// -------------------------------------------------
// Halt
// -------------------------------------------------
0000006f

//////////////////////////////////////////////////////////////////////////////////////////////////////////

00a00093   addi x1, x0, 10        # x1 = 10
02000113   addi x2, x0, 32        # x2 = 32

00102023   sw   x1, 0(x0)         # MEM[0]  = 10
00202223   sw   x2, 4(x0)         # MEM[4]  = 32

00002203   lw   x4, 0(x0)         # x4 = MEM[0]  = 10
00402283   lw   x5, 4(x0)         # x5 = MEM[4]  = 32

00520333   add  x6, x4, x5        # x6 = 10 + 32 = 42
00602423   sw   x6, 8(x0)         # MEM[8] = 42

00000063   beq  x0, x0, 0         # infinite loop (branch to itself)
00000063   beq  x0, x0, 0         # (same)

//////////////////////////////////////////////////////////////////////////////////////////////////////////

00a00093 // addi x1,x0,10
02000113 // addi x2,x0,32
00102023 // sw   x1,0(x0)
00202223 // sw   x2,4(x0)
00002203 // lw   x4,0(x0)
00402283 // lw   x5,4(x0)
00520333 // add  x6,x4,x5
00602423 // sw   x6,8(x0)

00100393 // addi x7,x0,1
00702623 // sw   x7,12(x0)
00138393 // addi x7,x7,1
00702823 // sw   x7,16(x0)
00138393 // addi x7,x7,1
00702a23 // sw   x7,20(x0)
00138393 // addi x7,x7,1
00702c23 // sw   x7,24(x0)
00138393 // addi x7,x7,1
00702e23 //sw   x7,28(x0)

00138393 // addi x7,x7,1
00702023 // sw   x7,0(x0)
00138393 // addi x7,x7,1
00702223 // sw   x7,4(x0)
00138393 // addi x7,x7,1
00702423 // sw   x7,8(x0)
00138393 // addi x7,x7,1
00702623 // sw   x7,12(x0)
00138393 // addi x7,x7,1
00702823 // sw   x7,16(x0)
00138393 // addi x7,x7,1
00702a23 // sw   x7,20(x0)
00138393 // addi x7,x7,1
00702c23 // sw   x7,24(x0)
00138393 // addi x7,x7,1
00702e23 // sw   x7,28(x0)

00138393 // addi x7,x7,1
00702023 // sw   x7,0(x0)
00138393 // addi x7,x7,1
00702223 // sw   x7,4(x0)
00138393 // addi x7,x7,1
00702423 // sw   x7,8(x0)
00138393 // addi x7,x7,1
00702623 // sw   x7,12(x0)
00138393 // addi x7,x7,1
00702823 // sw   x7,16(x0)
00138393 // addi x7,x7,1
00702a23 // sw   x7,20(x0)
00138393 // addi x7,x7,1
00702c23 // sw   x7,24(x0)
00138393 // addi x7,x7,1
00702e23 // sw   x7,28(x0)

00138393 // addi x7,x7,1
00702023 // sw   x7,0(x0)
00138393 // addi x7,x7,1
00702223 // sw   x7,4(x0)
00138393 // addi x7,x7,1
00702423 // sw   x7,8(x0)
00138393 // addi x7,x7,1
00702623 // sw   x7,12(x0)
00138393 // addi x7,x7,1
00702823 // sw   x7,16(x0)
00138393 // addi x7,x7,1
00702a23 // sw   x7,20(x0)
00138393 // addi x7,x7,1
00702c23 // sw   x7,24(x0)
00138393 // addi x7,x7,1
00702e23 // sw   x7,28(x0)
